<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Services ‚Äî COR'BAT</title>
  <link rel="stylesheet" href="css/style.css"/>
  <link rel="icon" type="image/png" href="favicon.png">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <span class="logo">
        <img src="images/logocorbat.png" alt="COR'BAT">
      </span>
      <span class="brand-name">COR'BAT</span>
    </div>
    <!-- ======== NAVIGATION ======== -->
    <button class="menu-toggle" id="menuToggle" aria-label="Ouvrir le menu">‚ò∞</button>

    <div class="mobile-menu-overlay" id="mobileOverlay"></div>
    
    <nav class="nav mobile-nav" id="mobileMenu" role="navigation" aria-label="Main navigation">
      <button class="close-menu" id="closeMenu" aria-label="Fermer le menu">‚úï</button>
    
      <a href="index.html" class="nav-link">Accueil</a>
      <a href="services.html" class="nav-link">Services</a>
      <a href="portfolio.html" class="nav-link">Portfolio</a>
      <a href="devis.html" class="nav-link">Demander un devis</a>
      <a href="contact.html" class="nav-link">Contact</a>
      <a href="about.html" class="nav-link">√Ä propos</a>
    
      <!-- Lien Admin -->
      <a href="admin/login.html"
         class="nav-link admin-link"
         id="adminMenu"
         style="display:none;"
         aria-hidden="true"
         tabindex="-1">Admin</a>
    </nav>  
  </header>
  <!-- ======== STYLES (consolid√©s) ======== -->
  <style>
    /* === Header moderne === */
    .topbar {
      display: flex;
      align-items: center;
      gap: 24px;
      padding: 18px 40px;
      background: linear-gradient(90deg,#000 0%, #000 100%);
      color: #fff;
      position: sticky;
      top: 0;
      z-index: 1000;
      box-shadow: 0 5px 25px rgba(0,0,0,0.1);
      font-family: 'Poppins', sans-serif;
    }
    /* Brand (logo + texte) */
    .brand {
      display: flex;
      align-items: center;
      gap: 12px;
      font-weight: 700;
      font-size: 1.2rem;
    }
    .brand .logo img {
      width: 48px;
      height: auto;
      display: inline-block;
      vertical-align: middle;
    }
    /* Degrad√© sur le texte de la marque (jaune/orange) */
    .brand .brand-name {
      font-size: 1.4rem;
      letter-spacing: 0.5px;
      background: #ffffff;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    /* Nav align√©e √† droite */
    .nav {
      display: flex;
      gap: 28px;
      margin-left: auto; /* pousse le menu vers la droite */
      align-items: center;
    }
    .nav-link {
      text-decoration: none;
      color: #fff;
      font-weight: 500;
      position: relative;
      font-size: 1rem;
      transition: color 0.25s ease;
    }
    .nav-link::after {
      content: '';
      position: absolute;
      width: 0%;
      height: 2px;
      bottom: -6px;
      left: 0;
      background: linear-gradient(90deg,#ffb400,#ff6b6b);
      transition: width 0.25s ease;
    }
    .nav-link:hover {
      color: #ffb400;
    }
    .nav-link:hover::after {
      width: 100%;
    }
    /* Bouton Demander un devis */
    .btn-devis {
      padding: 8px 16px;
      border-radius: 22px;
      background: linear-gradient(90deg,#ffb400,#ff6b6b);
      color: #111;
      font-weight: 700;
      box-shadow: 0 6px 18px rgba(255,107,107,0.12);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .btn-devis:hover {
      transform: translateY(-2px);
    }
    /* Style sp√©cial pour le lien Admin (quand visible) */
    .admin-link {
      color: #ff6b6b;
      font-weight: 700;
      border: 1px solid rgba(255,107,107,0.25);
      padding: 6px 12px;
      border-radius: 10px;
      background: rgba(255,255,255,0.02);
    }
    .admin-link:hover {
      background: #ff6b6b;
      color: white;
    }
    /* Menu toggle (mobile) */
    .menu-toggle {
      display: none;
      flex-direction: column;
      gap: 6px;
      cursor: pointer;
      margin-left: 12px;
    }
    .menu-toggle span {
      width: 26px;
      height: 3px;
      background: #fff;
      border-radius: 3px;
    }
    /* === Responsive === */
    @media (max-width: 1024px) {
      .nav {
        display: none;
        position: absolute;
        top: 70px;
        right: 20px;
        background: #000;
        flex-direction: column;
        padding: 18px;
        border-radius: 12px;
        box-shadow: 0 10px 25px rgba(0,0,0,0.3);
        gap: 12px;
        min-width: 200px;
      }
      .nav.active { display: flex; }
      .menu-toggle { display: flex; }
      .brand .brand-name { font-size: 1.1rem; }
    }
    /* --- Carte service : structure g√©n√©rale --- */
    /* === Grid layout === */
    .grid-2 {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 24px;
      margin-top: 24px;
    }
    /* === Card style & hover effect === */
    .service-card {
      background: #fff;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 4px 15px rgba(0,0,0,0.08);
      transition: transform 0.5s ease, box-shadow 0.5s ease;
    }
    .service-card:hover {
      transform: translateY(-10px) scale(1.03) rotateX(2deg);
      box-shadow: 0 10px 25px rgba(0,0,0,0.2);
    }
    /* === Card image hover === */
    .service-card img {
      width: 100%;
      border-radius: 8px;
      transition: transform 0.5s ease;
    }
    .service-card:hover img {
      transform: scale(1.05) rotate(1deg);
    }
    /* === Buttons animation === */
    .card-actions .btn-small,
    .card-actions .btn-interested {
      transition: all 0.3s ease;
      cursor: pointer;
    }
    .card-actions .btn-small:hover {
      transform: translateY(-3px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }
    .card-actions .btn-interested:hover {
      background: linear-gradient(45deg,#ff6b6b,#f06595);
      color: #fff;
      transform: scale(1.05);
    }
    .card.service-card {
      display: flex;
      flex-direction: column;
      background: #fff;
      border-radius: 12px;
      padding: 0;
      box-shadow: 0 8px 28px rgba(12, 17, 23, 0.06);
      overflow: hidden;
      height: 100%;             /* OCCUPE TOUTE LA HAUTEUR ‚Üí bouton toujours stable */
      width: 100%;
      box-sizing: border-box;
    }
    /* Image */
    .service-img {
      display: block;
      width: 100%;
      height: 240px;
      object-fit: cover;
    }
    /* Titre */
    .service-card h3 {
      padding: 18px 18px 0 18px;
      margin: 0;
      font-size: 1.15rem;
      line-height: 1.25;
      font-weight: 600;
    }
    /* Texte */
    .service-card p {
      flex: 1;                       /* ‚¨Ö‚¨Ö‚¨Ö IMPORTANT : remplit l‚Äôespace vertical restant */
      padding: 8px 18px 0 18px;
      margin: 0;
      color: #444;
      line-height: 1.45;
    }
    /* Zone actions (bouton) */
    .service-card .card-actions {
      margin-top: auto;              /* ‚¨Ö‚¨Ö‚¨Ö FIXATION ABSOLUE EN BAS */
      padding: 16px;
      background: #ffffff;
      border-top: 1px solid #eee;    /* ligne √©l√©gante s√©paratrice */
    }
    /* Bouton centr√© */
    .card-actions {
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .btn-details {
      margin-left: 10px;
      padding: 10px 14px;
      background: #f3f4f6;
      border: 1px solid #d1d5db;
      border-radius: 8px;
      font-size: 0.9rem;
      cursor: pointer;
      transition: 0.25s ease;
    }
    .btn-details:hover {
      background: #ffffff;
      border-color: #9ca3af;
      box-shadow: 0 4px 14px rgba(0,0,0,0.08);
      transform: translateY(-2px);
    }
    /* =========================
      TITRE & TEXTE CENTR√âS ‚Äî MOBILE
      ========================= */

      @media (max-width: 768px) {
      main.section h1 {
        text-align: center;
        font-size: 1.8rem;
      }

      main.section .section-sub {
        text-align: center;
        font-size: 1rem;
        line-height: 1.6;
        opacity: 0.9;
      }
    }
  </style>
  <!-- ======== SCRIPT DE PROTECTION CTRL + A (sans localStorage) ======== -->
  <script>
    (function () {
    
      const adminPassword = "MotDePasseCorbatAdministration"; // ton mot de passe d'acc√®s secret
      const DISPLAY_DURATION_MS = 60_000; // dur√©e d'affichage 1 min
    
      let hideAdminTimeout = null;
    
      const adminMenu = document.getElementById('adminMenu');
      const nav = document.querySelector('.nav');
      const menuToggle = document.getElementById('menuToggle');
    
      // Cacher par d√©faut
      const hideAdmin = () => {
        if (!adminMenu) return;
        adminMenu.style.display = 'none';
        adminMenu.setAttribute('aria-hidden', 'true');
        adminMenu.setAttribute('tabindex', '-1');
      };
    
      const showAdmin = () => {
        if (!adminMenu) return;
        adminMenu.style.display = 'inline-block';
        adminMenu.setAttribute('aria-hidden', 'false');
        adminMenu.setAttribute('tabindex', '0');
    
        /* Effacer toute trace d‚Äôauth locale (au cas o√π) */
        localStorage.removeItem('btp_admin_logged');
        localStorage.removeItem('btp_admin_token');
        sessionStorage.removeItem('btp_admin_token');
      };
    
      hideAdmin(); // cach√© au d√©marrage
    
      // Cliquer ‚Üí masque directement
      adminMenu?.addEventListener('click', () => {
        hideAdmin();
        if (hideAdminTimeout) clearTimeout(hideAdminTimeout);
      });
    
      // Emp√™cher focus si cach√©
      adminMenu?.addEventListener('keydown', (e) => {
        if (adminMenu.style.display === 'none') e.preventDefault();
      });
    
      // demande mot de passe ‚Üí affiche menu temporairement
      document.addEventListener('keydown', (e) => {
        if (e.ctrlKey && !e.shiftKey && e.key.toLowerCase() === 'b') {
          e.preventDefault(); // emp√™che "la fonctionnaliter par defaut"
          const pass = prompt("üîê Entrer le mot de passe administrateur :");
          if (pass === adminPassword) {
    
            showAdmin();
    
            if (hideAdminTimeout) clearTimeout(hideAdminTimeout);
            hideAdminTimeout = setTimeout(() => {
              hideAdmin();
              alert("‚åõ Lien admin cach√© automatiquement.");
            }, DISPLAY_DURATION_MS);
    
            alert("‚úÖ Lien admin activ√© temporairement !");
          } else {
            alert("‚õî Mot de passe incorrect.");
          }
        }
      });
    
      // Menu responsive
      if (menuToggle && nav) {
        menuToggle.addEventListener('click', () => {
          nav.classList.toggle('active');
        });
      }
    
    })();
  </script>

  <main class="container section">
    <h1>Nos services</h1>
    <p class="section-sub">Parcourez nos services et s√©lectionnez celui qui r√©pond √† vos besoins, puis cliquez sur <strong>Je suis int√©ress√©</strong> pour b√©n√©ficier de notre accompagnement.</p>

    <div id="servicesContainer" class="grid-2" aria-live="polite"></div>
  </main>

  <!-- === INTEREST MODAL === -->
  <div id="interestModal" class="modal">
    <div class="modal-overlay"></div>
    <div class="modal-panel">
      <button class="modal-close" id="closeModal">&times;</button>
      <h3>Int√©ress√© par <span id="serviceName">‚Äî</span></h3>

      <form id="interestForm" class="modern-form">
        <input type="hidden" id="serviceInput" name="service">

        <div class="form-group">
          <label>Nom complet</label>
          <input name="fullname"  required>
        </div>

        <div class="form-group">
          <label>Email</label>
          <input name="email" type="email"  required>
        </div>

        <div class="form-group">
          <label>T√©l√©phone</label>
          <input name="phone"  required>
        </div>

        <div class="form-group">
          <label>Message</label>
          <textarea name="message" ></textarea>
        </div>

        <div class="modal-actions">
          <button type="submit" class="btn-envoyer">Envoyer</button>
          <button type="button" class="btn-ghost" id="cancelModal">Annuler</button>
        </div>
      </form>
    </div>
  </div>

  <script>
    /* ---------- Modal helper global (ouvre / ferme le modal correctement) ---------- */
    (function(){
      // expose function globale pour ouvrir le modal depuis le rendu dynamique
      window.openInterestModal = function(serviceName){
        const modal = document.getElementById('interestModal');
        const serviceNameEl = document.getElementById('serviceName');
        const serviceInput = document.getElementById('serviceInput');
    
        if(serviceNameEl) serviceNameEl.textContent = serviceName || '‚Äî';
        if(serviceInput) serviceInput.value = serviceName || '';
    
        if(modal) {
          // utilise la classe .active (compatible avec ton CSS)
          modal.classList.add('active');
          // si l'ancien script utilisait style.display, on le neutralise pour √©viter conflits
          modal.style.display = '';
        } else {
          console.warn('‚ùå Modal interestModal introuvable.');
        }
      };
    
      // fermeture centralis√©e (√©vite doublons)
      function closeModalHandler(){
        const modal = document.getElementById('interestModal');
        if(modal) modal.classList.remove('active');
      }
    
      // bind boutons si pr√©sents
      document.addEventListener('DOMContentLoaded', function(){
        const modal = document.getElementById('interestModal');
        const closeBtn = document.getElementById('closeModal');
        const cancelBtn = document.getElementById('cancelModal');
    
        if (closeBtn) closeBtn.addEventListener('click', closeModalHandler);
        if (cancelBtn) cancelBtn.addEventListener('click', closeModalHandler);
    
        // clic en dehors du panneau ferme le modal
        if (modal) {
          modal.addEventListener('click', function(e){
            if (e.target && e.target.classList && e.target.classList.contains('modal')) {
              closeModalHandler();
            }
          });
        }
    
        // Si un ancien script ajoutait event listeners aux .btn-interested au chargement
        // (ex: js/script.js), ils ne seront pas attach√©s aux √©l√©ments inject√©s dynamiquement.
        // Le script de rendu s'occupe d'ajouter un listener apr√®s injection.
      });
    
    })();
  </script>

  <script>
    const API_URL = "/api/services"; 

    // üîπ Fonction utilitaire d‚Äô√©chappement (globale)
    function escapeHtml(s) {
      return String(s || '').replace(/[&<>"']/g, m => (
        {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;'}[m]
      ));
    }

    let services = []; // üîπ variable globale accessible partout

    (async function(){
      const container = document.getElementById("servicesContainer");

      // üîπ R√©cup√©rer les services depuis le backend
      async function fetchServices() {
        try {
          const res = await fetch(API_URL);
          if (!res.ok) throw new Error("‚ùå Erreur serveur");
          return await res.json();
        } catch (err) {
          console.error("‚ùå Erreur r√©cup√©ration services:", err);
          container.innerHTML = "<p style='color:#a00'>‚ùå Impossible de charger les services.</p>";
          return [];
        }
      }

      // üîπ Afficher les services
      async function render() {
        services = await fetchServices(); // üü¶ stock√© dans variable globale

        if (!services.length) {
          container.innerHTML = "<p style='color:#666'>Aucun service disponible.</p>";
          return;
        }

        container.innerHTML = services
        .sort((a, b) => (a.order_index || 0) - (b.order_index || 0))
        .map(s => `
          <article class="card service-card" data-id="${escapeHtml(s.id || '')}">
            <img 
              src="${s.image ? escapeHtml(s.image) : 'images/btporinasa.png'}"
              alt="${escapeHtml(s.title || 'Service')}"
              class="service-img"
            >
            <h3>${escapeHtml(s.title || '')}</h3>
            <p>${escapeHtml(s.short || s.description || '')}</p>

            <div class="card-actions">
              <button class="btn-interested btn-primary" data-service="${escapeHtml(s.title || '')}">
                Je suis int√©ress√©
              </button>

              <button class="btn-details" data-id="${escapeHtml(s.id)}">
                Voir d√©tail
              </button>
            </div>
          </article>
        `)
        .join('');

        // üî∏ Boutons "Je suis int√©ress√©"
        document.querySelectorAll('.btn-interested').forEach(btn => {
          btn.addEventListener('click', () => {
            const svcName = btn.dataset.service;
            if (typeof openInterestModal === 'function') {
              openInterestModal(svcName);
            } else {
              alert('‚ùå Fonction openInterestModal manquante.');
            }
          });
        });
      }

      // üîπ Initialisation
      render();

    })();


    // === üü¶ Bouton Voir d√©tail ===
    document.addEventListener("click", (e) => {
      if (!e.target.classList.contains("btn-details")) return;

      const id = e.target.dataset.id;
      const service = services.find(s => String(s.id) === String(id));

      if (!service) {
        alert("‚ùå Service introuvable.");
        return;
      }

      const w = window.open("", "_blank");
      if (!w) {
        alert("Autorisez les popups pour voir les d√©tails.");
        return;
      }

      const html = `
        <!doctype html>
        <html>
        <head>
        <meta charset="utf-8">
        <title>${escapeHtml(service.title)}</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <style>
          body {
            font-family: 'Poppins', sans-serif;
            background: #f9fafb;
            margin: 0;
            padding: 0;
            animation: fadeIn .5s ease-out;
            color: #111;
          }
          @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
          }
          header {
            padding: 20px;
            background: white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            text-align: center;
            font-size: 1.6rem;
            font-weight: 700;
          }
          .container {
            padding: 20px;
            max-width: 900px;
            margin: auto;
          }
          .big-img {
            width: 100%;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.1);
          }
          .price {
            font-size: 1.2rem;
            padding: 10px 14px;
            background: #eef2ff;
            display: inline-block;
            border-radius: 8px;
            margin-top: 12px;
            color: #4338ca;
            font-weight: 600;
          }
          .desc {
            margin-top: 20px;
            line-height: 1.7;
            color: #444;
          }
        </style>
        </head>

        <body>
          <header>${escapeHtml(service.title)}</header>

          <div class="container">
            <img class="big-img" src="${service.image}" alt="">
            <div class="price">${service.price || ""}</div>
            <p class="desc">${escapeHtml(service.description || service.short || "")}</p>
          </div>

        </body>
        </html>
      `;

      w.document.open();
      w.document.write(html);
      w.document.close();
    });
  </script>

  <style>
      /* === MODAL OVERLAY === */
    .modal {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100vh;
      display: none;
      justify-content: center;
      align-items: center;
      backdrop-filter: blur(5px);
      z-index: 999;
    }
    .modal.active {
      display: flex;
      animation: fadeIn 0.4s ease;
    }
    .modal-overlay {
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, 0.55);
      border-radius: 0;
    }
    /* === MODAL PANEL === */
    .modal-panel {
      position: relative;
      background: #fff;
      padding: 40px 50px;
      border-radius: 18px;
      box-shadow: 0 10px 35px rgba(0,0,0,0.25);
      width: 100%;
      max-width: 550px;
      z-index: 10;
      animation: slideUp 0.5s ease;

      /* ‚úÖ Ajouts pour le scroll */
      max-height: 85vh;           /* limite la hauteur du modal */
      overflow-y: auto;           /* active le d√©filement vertical */
      scrollbar-width: thin;      /* (Firefox) rend la barre fine */
      scrollbar-color: #ffb400 #f5f5f5;
    }
    .modal-panel::-webkit-scrollbar {
      width: 8px;
    }
    .modal-panel::-webkit-scrollbar-thumb {
      background: linear-gradient(180deg, #ffb400, #ff6b6b);
      border-radius: 10px;
    }
    .modal-panel::-webkit-scrollbar-track {
      background: #f0f0f0;
      border-radius: 10px;
    }
    /* Fermer le modal */
    .modal-close {
      position: absolute;
      top: 15px;
      right: 18px;
      background: none;
      border: none;
      font-size: 28px;
      font-weight: bold;
      color: #ff6b6b;
      cursor: pointer;
      transition: 0.2s;
    }
    .modal-close:hover {
      color: #ffb400;
      transform: scale(1.2);
    }
    /* === TITRE === */
    .modal-panel h3 {
      text-align: center;
      margin-bottom: 25px;
      font-size: 1.8rem;
      background: linear-gradient(90deg, #ffb400, #ff6b6b);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      letter-spacing: 0.5px;
    }
    /* === FORMULAIRE === */
    .modern-form {
      display: flex;
      flex-direction: column;
      gap: 18px;
    }
    .form-group {
      display: flex;
      flex-direction: column;
    }
    label {
      font-weight: 600;
      color: #333;
      margin-bottom: 6px;
    }
    input, textarea {
      width: 100%;
      border: 1px solid #ddd;
      border-radius: 10px;
      padding: 12px 15px;
      background: #fafafa;
      transition: 0.3s;
      font-size: 15px;
    }
    input:focus, textarea:focus {
      border-color: #ffb400;
      box-shadow: 0 0 0 3px rgba(255,180,0,0.15);
      background-color: #fff;
      outline: none;
    }
    /* === BOUTONS === */
    .modal-actions {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-top: 10px;
    }
    .btn-primary {
      background: linear-gradient(90deg, #ffb400, #ff6b6b);
      color: #fff;
      border: none;
      padding: 12px 30px;
      border-radius: 12px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: 0.3s;
    }
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 18px rgba(255,107,107,0.3);
    }
    .btn-envoyer {
      background: rgb(39, 165, 39);
      color: #fff;
      border: none;
      padding: 12px 30px;
      border-radius: 12px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: 0.3s;
    }
    .btn-envoyer:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 18px rgba(6, 150, 1, 0.582);
    }
    .btn-ghost {
      border: 2px solid #ff6b6b;
      color: #ff6b6b;
      padding: 12px 30px;
      border-radius: 12px;
      text-decoration: none;
      font-weight: 600;
      transition: 0.3s;
    }
    .btn-ghost:hover {
      background: #ff6b6b;
      color: white;
    }
    /* === ANIMATIONS === */
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    @keyframes slideUp {
      from { transform: translateY(40px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
  </style>

  <footer class="site-footer">
    <div class="footer-container">
      <div class="footer-about">
        <div class="footer-brand">
          <h4>COR'BAT</h4>
          <span class="company-badge">Entreprise</span>
        </div>
        <p class="lux-separator">Construction <span class="star">‚òÖ</span> R√©novation <span class="star">‚òÖ</span> Design</p>
        <div class="footer-contact">
          <div class="contact-item">
            üìû <a href="tel:+261338790262">+261 33 87 902 62</a>
          </div>
          <div class="contact-item">
            üìû <a href="tel:+261376341770">+261 37 63 417 70</a>
          </div>
          <div class="contact-item">
            üìû <a href="tel:+261380881659">+261 38 08 816 59</a>
          </div>
        </div>
        <p>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 64 64" fill="none">
            <circle cx="32" cy="32" r="30" stroke="#E0E0E0" stroke-width="2"/>
            <rect x="16" y="22" width="32" height="20" rx="3" stroke="#EA4335" stroke-width="2.5"/>
            <path d="M16 24 L32 36 L48 24" stroke="#EA4335" stroke-width="2.5"/>
          </svg>          
          Email : <a href="mailto:corbatmadagascar@gmail.com">corbatmadagascar@gmail.com</a></p>
      </div>

      <div class="footer-social">
        <h4>Suivez-nous</h4>
        <div class="social-links">
          <a href="https://www.facebook.com/profile.php?id=61584050241087" target="_blank" aria-label="Facebook" class="social facebook"><i class="fab fa-facebook-f"></i></a>
          <a href="https://wa.me/261338790262" target="_blank" aria-label="WhatsApp" class="social whatsapp"><i class="fab fa-whatsapp"></i></a>
          <a href="https://www.instagram.com/corbat_construction" target="_blank" aria-label="Instagram" class="social instagram"><i class="fab fa-instagram"></i></a>
          <a href="https://www.linkedin.com/in/corbat-construction-82079939b" target="_blank" aria-label="LinkedIn" class="social linkedin"><i class="fab fa-linkedin-in"></i></a>        
        </div>
      </div>
    </div>

    <div class="footer-bottom">
      <p>¬© 2025 COR'BAT. Tous droits r√©serv√©s.</p>
      <p class="dev-credit">
        D√©velopp√© par <a href="https://wa.me/261331916764" target="_blank">Kenny R.</a> ‚Äî <span class="role">D√©veloppeur Web</span>
      </p>
    </div>
  </footer>
  
  <style>
    /* === Footer moderne === */
    .site-footer {
      background: #000000;
      color: #fff;
      padding: 50px 40px 20px 40px;
      font-family: 'Poppins', sans-serif;
      border-top-left-radius: 25px;
      border-top-right-radius: 25px;
      box-shadow: 0 -5px 25px rgba(0,0,0,0.1);
    }
    .footer-container {
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 40px;
    }
    .footer-about h4, .footer-social h4 {
      font-size: 1.4rem;
      margin-bottom: 15px;
      font-weight: 700;
    }
    .footer-about p, .footer-about a {
      font-size: 1rem;
      color: #f0f0f0;
      text-decoration: none;
      margin-bottom: 6px;
      transition: color 0.3s ease;
    }
    .footer-about a:hover {
      color: #FFD700;
    }
    .footer-social h4 {
      margin-left: 90px;
    }
    .footer-social .social-links {
      display: flex;
      gap: 20px;
      margin-top: 10px;
      margin-left: 40%;
    }
    .footer-social .social {
      font-size: 1.8rem;
      color: #fff;
      transition: transform 0.3s ease, color 0.3s ease;
    }
    .footer-social .social:hover {
      transform: translateY(-5px) scale(1.1);
    }
    .footer-social .facebook:hover { color: #1877f2; }
    .footer-social .whatsapp:hover { color: #25D366; }
    .footer-social .instagram:hover { color: #E4405F; }
    .footer-social .linkedin:hover { color: #0a66c2; }
    .footer-bottom {
      text-align: center;
      margin-top: 35px;
      font-size: 0.95rem;
      color: #ccc;
      border-top: 1px solid rgba(255,255,255,0.1);
      padding-top: 15px;
    }
    .footer-bottom {
      text-align: center;
      padding: 12px 0;
      font-size: 14px;
      border-top: 1px solid rgba(255,255,255,0.15);
    }
    .footer-bottom .dev-credit {
      margin-top: 4px;
      font-size: 11.5px; /* petit et fin */
      opacity: 0.45; /* discret */
      transition: opacity 0.3s;
    }
    .footer-bottom .dev-credit:hover {
      opacity: 0.8; /* plus visible quand on passe la souris */
    }
    .footer-bottom .dev-credit a {
      color: #fff;
      text-decoration: none;
      font-weight: 500;
    }
    .footer-bottom .dev-credit a:hover {
      text-decoration: underline;
    }
    .footer-bottom .dev-credit .role {
      font-style: italic;
      opacity: 0.7;
    }
    .lux-separator {
      font-size: 19px;
      letter-spacing: 1.5px;
      font-weight: 500;
      color: #2a2a2a;
      font-family: "Georgia", serif;
    }
    .lux-separator .star {
      padding: 0 10px;
      font-size: 22px;
      color: #d4af37;      /* or royal */
      text-shadow: 0 0 4px rgba(212, 175, 55, 0.6);
    }
    .footer-brand {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .company-badge {
      font-size: 0.75rem;
      padding: 4px 10px;
      border-radius: 20px;
      background: linear-gradient(135deg, #111, #333);
      color: #fff;
      text-transform: uppercase;
      letter-spacing: 1px;
      font-weight: 600;
    }
    .footer-contact {
      display: flex;
      flex-direction: column;
      gap: 6px;
      align-items: center;
      margin-top: 8px;
    }

    /* =========================
      FOOTER MOBILE OPTIMIZATION
      ========================= */

    @media (max-width: 768px) {
      .site-footer {
        padding: 35px 20px 15px 20px;
        border-top-left-radius: 18px;
        border-top-right-radius: 18px;
      }

      .footer-container {
        flex-direction: column;
        align-items: center;
        gap: 30px;
      }

      .footer-about,
      .footer-social {
        text-align: center;
        width: 100%;
      }

      .footer-brand {
        justify-content: center;
      }

      .footer-about h4,
      .footer-social h4 {
        font-size: 1.3rem;
      }

      .lux-separator {
        font-size: 16px;
        text-align: center;
      }

      .footer-about p {
        font-size: 0.95rem;
        line-height: 1.6;
      }

      .footer-about p svg {
        vertical-align: middle;
        margin-right: 6px;
      }

      .footer-social h4 {
        margin-left: 0;
      }

      .footer-social .social-links {
        justify-content: center;
        margin-left: 0;
        gap: 18px;
      }

      .footer-social .social {
        font-size: 1.6rem;
      }

      .footer-bottom {
        font-size: 0.85rem;
      }

      .footer-bottom .dev-credit {
        font-size: 10.5px;
      }

      .company-badge {
        font-size: 0.7rem;
        padding: 3px 8px;
      }
    }
    @media (max-width: 768px) {
    .site-footer {
      backdrop-filter: blur(6px);
    }

    .footer-social .social {
      background: rgba(255,255,255,0.08);
      padding: 12px;
      border-radius: 50%;
    }

    .footer-social .social:active {
      transform: scale(0.9);
    }
  }
  /* =========================
      FOOTER MOBILE FIX PRO
      ========================= */
    @media (max-width: 768px) {

    .site-footer {
      padding: 30px 16px 15px;
      border-radius: 20px 20px 0 0;
    }

    .footer-container {
      flex-direction: column;
      align-items: center;
      text-align: center;
      gap: 26px;
    }

    .footer-about,
    .footer-social {
      width: 100%;
    }

    .footer-brand {
      justify-content: center;
      flex-wrap: wrap;
    }

    .footer-about h4 {
      font-size: 1.3rem;
    }

    .company-badge {
      font-size: 0.65rem;
      padding: 3px 8px;
    }

    .lux-separator {
      font-size: 15px;
      line-height: 1.6;
      text-align: center;
    }

    .lux-separator .star {
      padding: 0 6px;
      font-size: 18px;
    }

    .footer-about p {
      font-size: 0.9rem;
      line-height: 1.6;
      max-width: 300px;
      margin: 0 auto 10px;
    }

    .footer-about p svg {
      display: block;
      margin: 0 auto 6px;
    }

    .footer-about a {
      display: inline-block;
      word-break: break-word;
    }

    /* T√©l√©phones en colonne */
    .footer-about p a {
      display: block;
      margin: 4px 0;
    }

    .footer-social h4 {
      margin: 0;
      font-size: 1.2rem;
    }

    .footer-social .social-links {
      justify-content: center;
      margin: 10px 0 0;
      gap: 16px;
    }

    .footer-social .social {
      font-size: 1.4rem;
      background: rgba(255,255,255,0.08);
      padding: 12px;
      border-radius: 50%;
    }

    .footer-bottom {
      margin-top: 25px;
      font-size: 0.8rem;
    }

    .footer-bottom p {
      margin: 4px 0;
    }

    .footer-bottom .dev-credit {
      font-size: 10px;
      line-height: 1.4;
    }
    }
  </style>

  <script src="js/script.js"></script>

  <script>
    (async function(){
      const KEY = 'btp_services';
      const IMG_STORE = 'btp_images';
      const DB_NAME = 'btp_store_v1';
    
      // IndexedDB helpers (lecture seule n√©cessaire c√¥t√© client)
      function openDb(){
        return new Promise((res, rej) => {
          const rq = indexedDB.open(DB_NAME, 1);
          rq.onupgradeneeded = () => {
            const db = rq.result;
            if (!db.objectStoreNames.contains(IMG_STORE)) {
              db.createObjectStore(IMG_STORE);
            }
          };
          rq.onsuccess = () => res(rq.result);
          rq.onerror = () => rej(rq.error);
        });
      }
      function getImageBlob(key){
        return openDb().then(db => new Promise((res,rej)=>{
          const tx = db.transaction(IMG_STORE, 'readonly');
          const rq = tx.objectStore(IMG_STORE).get(key);
          rq.onsuccess = () => { db.close(); res(rq.result || null); };
          rq.onerror = () => { db.close(); rej(rq.error); };
        }));
      }
    
      function loadServices(){
        try { const v = JSON.parse(localStorage.getItem(KEY)||'[]'); return Array.isArray(v) ? v : []; }
        catch(e){ return []; }
      }
    
      function escapeHtml(s){ return String(s||'').replace(/[&<>"']/g, m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])); }
    
      // Container where to inject services ‚Äî adapte le selecteur si n√©cessaire
      // Ici on suppose qu'il y a un <main class="container section"> et tu veux injecter dans un div#servicesContainer
      // Si tu n'as pas d'√©l√©ment cible, le script cr√©e un conteneur apr√®s le <main>.
      let container = document.getElementById('servicesContainer');
      if(!container){
        const main = document.querySelector('main') || document.body;
        container = document.createElement('div');
        container.id = 'servicesContainer';
        container.style.margin = '20px 0';
        main.appendChild(container);
      }
    
      // Render function: cr√©e les cartes et remplit les images async
      async function render(){
        const services = loadServices().sort((a,b)=> (Number(a.order||0) - Number(b.order||0)));
        if(services.length === 0){
          container.innerHTML = '<p style="color:#666">Aucun service disponible pour le moment.</p>';
          return;
        }
    
        // build markup with placeholder img src
        container.innerHTML = services.map(s => {
          const imgPlaceholder = s.image || 'images/btporinasa.png';
          const id = 'svc_img_' + (s.id || Math.random().toString(36).slice(2,8));
          return `
            <article class="card service-card" data-id="${escapeHtml(s.id||'')}">
              <img id="${id}" src="${escapeHtml(imgPlaceholder)}" alt="${escapeHtml(s.title||'Service')}" />
              <h3>${escapeHtml(s.title||'')}</h3>
              <p>${escapeHtml(s.short || s.description || '')}</p>
              <div class="card-actions">
                <button class="btn-interested" data-service="${escapeHtml(s.title||'')}">Je suis int√©ress√©</button>
              </div>
            </article>
          `;
        }).join('');
    
        // now resolve imageRef blobs asynchronously
        const promises = services.map(async (s) => {
          if (s.imageRef){
            try {
              const blob = await getImageBlob(s.imageRef);
              if (blob){
                const url = URL.createObjectURL(blob);
                const imgEl = document.getElementById('svc_img_' + (s.id || ''));
                // fallback if id key mismatch
                if(!imgEl){
                  // try find by data-id and first img inside
                  const wrapper = document.querySelector(`article.service-card[data-id="${s.id}"]`);
                  const img2 = wrapper ? wrapper.querySelector('img') : null;
                  if(img2){ img2.src = url; img2.onload = ()=> URL.revokeObjectURL(url); }
                } else {
                  imgEl.src = url;
                  imgEl.onload = ()=> URL.revokeObjectURL(url);
                }
              }
            } catch(err){ console.warn('‚ùåImpossible de charger imageRef', s.imageRef, err); }
          }
        });
    
        await Promise.all(promises);
    
        // Re-bind "Je suis int√©ress√©" buttons to open modal (if your modal uses openInterestModal)
        document.querySelectorAll('.btn-interested').forEach(btn=>{
          btn.addEventListener('click', ()=> {
            const svc = btn.dataset.service || btn.getAttribute('data-service');
            if(typeof openInterestModal === 'function'){
              openInterestModal(svc);
            } else {
              alert('‚ùåFonction openInterestModal inexistante ‚Äî v√©rifier le modal.');
            }
          });
        });
      }
    
      // initial render
      render();
    
      // expose render to window for dev/use
      window.renderClientServices = render;
    
    })();
  </script>
  <script>
    const menuToggle = document.getElementById("menuToggle");
    const mobileMenu = document.getElementById("mobileMenu");
    const mobileOverlay = document.getElementById("mobileOverlay");
    const closeMenu = document.getElementById("closeMenu");
    
    menuToggle.addEventListener("click", () => {
      mobileMenu.classList.add("active");
      mobileOverlay.classList.add("active");
    });
    
    closeMenu.addEventListener("click", closeMobileMenu);
    mobileOverlay.addEventListener("click", closeMobileMenu);
    
    function closeMobileMenu() {
      mobileMenu.classList.remove("active");
      mobileOverlay.classList.remove("active");
    }
    
    // Ferme le menu quand on clique sur un lien
    document.querySelectorAll(".nav-link").forEach(link => {
      link.addEventListener("click", closeMobileMenu);
    });
    </script> 
</body>
</html>
