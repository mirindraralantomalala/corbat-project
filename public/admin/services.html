<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gestion des services ‚Äî COR'BAT</title>
  <link rel="stylesheet" href="../css/style.css"/>
  <link rel="icon" type="image/png" href="../favicon.png">
  <style>
    /* Styles sp√©cifiques √† l'admin services (compact) */
    * {
      box-sizing: border-box;
    }

    html, body {
      width: 100%;
      overflow-x: hidden;
    }

    body { font-family: 'Poppins',sans-serif; background: #f6f7fb; color:#111;}
    .container { max-width:1100px; margin:0 auto; }
    .card { background:#fff; padding:18px; border-radius:12px; box-shadow:0 6px 18px rgba(12,12,20,0.06); margin-bottom:18px; }
    .grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 14px;
    }
    label { display:block; font-weight:600; margin-bottom:6px; font-size:0.95rem; }
    input[type="text"], input[type="number"], textarea, select { width:100%; padding:10px 12px; border-radius:8px; border:1px solid #e6e9ef; box-sizing:border-box; }
    textarea { min-height:100px; resize:vertical; }
    .btn { padding:10px 12px; border-radius:8px; border:0; cursor:pointer; font-weight:700; }
    .btn-primary {
      background: linear-gradient(135deg, #16a34a, #22c55e);
      color: #fff;
    }

    .btn-modraf {
      background: linear-gradient(135deg, #06b6d4, #22d3ee);
      color: #000;
    }

    .btn-ghost {
      background: linear-gradient(135deg, #ef4444, #dc2626);
      color: #fff;
    }
    .services-list { display:flex; flex-direction:column; gap:10px; }
    .svc-row { display:flex; gap:12px; align-items:center; padding:10px; border-radius:10px; border:1px solid #f0f2f5; background:#fff; }
    .svc-thumb { width:84px; height:64px; border-radius:8px; object-fit:cover; background:#f2f2f2; flex:0 0 84px; }
    .svc-body { flex:1; }
    .svc-title { font-weight:700; margin:0 0 6px 0; }
    .svc-desc { margin:0; color:#555; font-size:0.95rem; }
    .svc-actions { display:flex; gap:8px; align-items:center; }
    .search { padding:10px 12px; border-radius:8px; border:1px solid #e6e9ef; width:100%; box-sizing:border-box; }
    .small-muted { color:#6b7280; font-size:0.9rem; }
    .img-preview { width:100%; height:160px; object-fit:cover; border-radius:10px; border:1px solid #eaeaea; }
    .help { font-size:0.9rem; color:#6b7280; margin-top:6px; }
    @media (max-width:980px){ .grid{ grid-template-columns: 1fr; } .svc-row{ flex-direction:row; } }
    /* ============================
          RESPONSIVE MOBILE SERVICES
        ============================ */

        @media (max-width: 768px) {
          .container {
            max-width: 100%;
            padding: 14px;
            margin: 0 auto;
          }
          .grid {
            grid-template-columns: 1fr;
          }

          .svc-row {
            flex-direction: column;
            align-items: stretch;
            gap: 10px;
          }

          .svc-thumb {
            width: 100%;
            height: 180px;
          }

          .svc-body {
            width: 100%;
          }

          .svc-title {
            font-size: 1.1rem;
          }

          .svc-desc {
            font-size: 0.95rem;
          }

          .svc-actions {
            display: flex;
            gap: 8px;
            margin-top: 10px;
          }

          .svc-actions .btn {
            flex: 1;
            padding: 12px;
            font-size: 0.9rem;
          }

          input, textarea, select {
            font-size: 16px; /* √©vite zoom iOS */
          }

          .img-preview {
            height: 200px;
          }

          .card h2 {
            font-size: 1.3rem;
          }

          .card h3 {
            font-size: 1.1rem;
          }

          .btn {
            padding: 12px;
          }

          .search {
            font-size: 16px;
          }
        }
        @media (max-width: 768px) {
          .svc-actions {
            width: 100%;
          }
        }
        @media (max-width: 768px) {
          .svc-actions button {
            min-height: 44px; /* norme mobile */
          }
        }
        @media (max-width: 768px) {
          form {
            gap: 14px;
          }

          label {
            font-size: 0.95rem;
          }

          textarea {
            min-height: 120px;
          }
        }
        /* üîí S√©curit√© anti-d√©bordement */
        * {
          box-sizing: border-box;
        }

        html, body {
          width: 100%;
          overflow-x: hidden;
        }

        /* Conteneur principal */
        .container {
          padding: 12px;
          width: 100%;
        }

        /* Liste services */
        .services-list {
          width: 100%;
        }

        /* Card service mobile */
        .svc-row {
          flex-wrap: wrap;
          width: 100%;
        }

        /* Image service */
        .svc-thumb {
          width: 100%;
          height: auto;
          max-height: 180px;
        }

        /* Contenu service */
        .svc-body {
          width: 100%;
        }

        /* Boutons */
        .svc-actions {
          width: 100%;
          flex-wrap: wrap;
        }

        .svc-actions button {
          flex: 1;
          min-width: 120px;
        }

        /* Formulaire */
        form {
          width: 100%;
        }

        input,
        textarea,
        select,
        button {
          max-width: 100%;
        }

        /* Grid principal */
        .grid {
          width: 100%;
        }

        /* Mobile */
        @media (max-width: 768px) {
          .grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 16px;
          }
          .svc-row {
            flex-direction: column;
            align-items: stretch;
          }

          .svc-thumb {
            width: 100%;
            height: 160px;
          }

          .svc-actions {
            flex-direction: column;
            gap: 8px;
          }

          .btn {
            width: 100%;
          }
        }
        .btn-danger {
          background: linear-gradient(135deg, #ff3b3b, #d60000);
          color: #fff;
          border: none;
          border-radius: 10px;
          padding: 10px 14px;
          font-weight: 700;
          box-shadow: 0 4px 12px rgba(255, 0, 0, 0.25);
          transition: transform 0.15s ease, box-shadow 0.15s ease;
        }

        .btn-danger:active {
          transform: scale(0.97);
        }

        .btn-danger:hover {
          box-shadow: 0 6px 16px rgba(255, 0, 0, 0.35);
        }
        .del-btn {
          touch-action: manipulation;
          z-index: 10;
          position: relative;
        }
        * {
          box-sizing: border-box;
        }

        body {
          overflow-x: hidden;
        }
        input, textarea, select, button {
          width: 100%;
          max-width: 100%;
        }
        form > div {
          width: 100%;
        }
        .two-cols {
          display: flex;
          gap: 10px;
          flex-wrap: wrap;
        }

        .two-cols > div {
          width: 100%;
        }

        @media (min-width: 600px) {
          .two-cols > div {
            width: 50%;
          }
        }
        .svc-card {
          display: flex;
          flex-direction: column;
          gap: 10px;
          width: 100%;
        }

        .svc-head {
          display: flex;
          gap: 12px;
          align-items: center;
          flex-wrap: wrap;
        }

        .svc-thumb {
          width: 56px;
          height: 56px;
          border-radius: 12px;
          object-fit: cover;
          flex-shrink: 0;
        }

        .svc-info {
          flex: 1;
          min-width: 0;
        }

        .svc-title {
          font-weight: 700;
          font-size: 1rem;
          word-wrap: break-word;
        }

        .svc-desc {
          font-size: 0.95rem;
          color: #444;
          word-wrap: break-word;
        }

        .svc-price {
          font-size: 0.9rem;
          color: #666;
        }

        .svc-actions {
          display: flex;
          gap: 10px;
        }

        .svc-actions button {
          flex: 1;
        }

        .btn {
          padding: 12px;
          border-radius: 10px;
          font-weight: 600;
          border: none;
        }

        .del-btn {
          background: linear-gradient(135deg, #ff4d4d, #e60000);
          color: #fff;
        }

        .edit-btn {
          background: linear-gradient(135deg, #00d2ff, #00a2ff);
          color: #fff;
        }
        .mobile-card {
          background: #fff;
          border-radius: 16px;
          padding: 16px;
          box-shadow: 0 8px 20px rgba(0,0,0,0.06);
          width: 100%;
          max-width: 100%;
          overflow: hidden;
        }

  </style>
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <span class="logo">
        <img src="../images/COR'BAT.png" alt="COR'BAT">
      </span>
      <span class="brand-name">Admin COR'BAT</span>
    </div>
  
    <!-- Desktop menu -->
    <nav class="nav desktop-nav">
      <a href="dashboard.html" class="nav-link">Tableau de bord</a>
      <a href="devis.html" class="nav-link">Liste devis</a>
      <a href="leads.html" class="nav-link">Clients int√©ress√©s</a>
      <a href="projects.html" class="nav-link">Projets r√©cents</a>
      <a href="services.html" class="nav-link">Nos services</a>
      <a href="callbacks.html" class="nav-link">Demandes de rappel</a>
  
      <button id="btnLogout" class="btn-deco">Se d√©connecter</button>
    </nav>
  
    <!-- Bouton mobile -->
    <button class="menu-toggle" id="menuToggle" aria-label="Ouvrir le menu">‚ò∞</button>
  
    <!-- Overlay -->
    <div class="mobile-menu-overlay" id="mobileOverlay"></div>
  
    <!-- Mobile menu -->
    <nav class="mobile-nav" id="mobileMenu">
      <button class="close-menu" id="closeMenu">‚úï</button>
  
      <a href="dashboard.html" class="nav-link">Tableau de bord</a>
      <a href="devis.html" class="nav-link">Liste devis</a>
      <a href="leads.html" class="nav-link">Clients int√©ress√©s</a>
      <a href="projects.html" class="nav-link">Projets r√©cents</a>
      <a href="services.html" class="nav-link">Nos services</a>
      <a href="callbacks.html" class="nav-link">Demandes de rappel</a>
  
      <div class="admin-actions-mobile">
        <button id="btnLogoutMobile" class="btn-deco">Se d√©connecter</button>
      </div>
    </nav>
  </header>
  <!-- ======== STYLES (consolid√©s) ======== -->
  <style>
    /* Desktop */
    .nav {
      display: flex;
    }
    /* === Header moderne === */
    .topbar {
      display: flex;
      align-items: center;
      gap: 24px;
      padding: 18px 40px;
      background: #000;
      color: #fff;
      position: sticky;
      top: 0;
      z-index: 1000;
      box-shadow: 0 5px 25px rgba(0,0,0,0.1);
      font-family: 'Poppins', sans-serif;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 12px;
      font-weight: 700;
      font-size: 1.2rem;
    }
    .brand .logo img {
      width: 48px;
      height: auto;
      display: inline-block;
      vertical-align: middle;
    }
    .brand .brand-name {
      font-size: 1.4rem;
      letter-spacing: 0.5px;
      background: #ffffff;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    .brand img { width:50px; height:auto; }
    /* Nav align√©e √† droite */
    .desktop-nav {
      display: flex;
      gap: 28px;
      margin-left: auto;
      align-items: center;
    }
    .nav-link {
      text-decoration: none;
      color: #fff;
      font-weight: 500;
      position: relative;
      font-size: 1rem;
      transition: color 0.25s ease;
    }
    .nav-link::after {
      content: '';
      position: absolute;
      width: 0%;
      height: 2px;
      bottom: -6px;
      left: 0;
      background: linear-gradient(90deg,#ffb400,#ff6b6b);
      transition: width 0.25s ease;
    }
    .nav-link:hover {
      color: #ffb400;
    }
    .nav-link:hover::after {
      width: 100%;
    }
    /* Bouton Demander un devis */
    .btn-devis {
      padding: 8px 16px;
      border-radius: 22px;
      background: linear-gradient(90deg,#ffb400,#ff6b6b);
      color: #111;
      font-weight: 700;
      box-shadow: 0 6px 18px rgba(255,107,107,0.12);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .btn-devis:hover {
      transform: translateY(-2px);
    }
    /* Menu toggle (mobile) */
    .menu-toggle {
      display: none;
      flex-direction: column;
      gap: 6px;
      cursor: pointer;
      margin-left: 12px;
    }
    .menu-toggle span {
      width: 26px;
      height: 3px;
      background: #fff;
      border-radius: 3px;
    }
    /* ===== Mobile menu admin ===== */
    .menu-toggle {
      background: none;
      border: none;
      font-size: 1.8rem;
      color: #fff;
      cursor: pointer;
      display: none;
    }

    .mobile-menu-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.6);
      opacity: 0;
      pointer-events: none;
      transition: 0.3s ease;
      z-index: 998;
    }

    .mobile-menu-overlay.active {
      opacity: 1;
      pointer-events: auto;
    }

    .mobile-nav {
      position: fixed;
      top: 0;
      right: -100%;
      width: 85%;
      max-width: 340px;
      height: 100vh;
      background: #000;
      display: flex;
      flex-direction: column;
      padding: 24px;
      gap: 8px;
      transition: 0.35s ease;
      z-index: 999;
    }

    .mobile-nav.active {
      right: 0;
    }

    .close-menu {
      background: none;
      border: none;
      color: #fff;
      font-size: 1.5rem;
      align-self: flex-end;
      cursor: pointer;
    }

    .mobile-nav .nav-link {
      font-size: 1.05rem;
      padding: 12px 0;
      border-bottom: 1px solid rgba(255,255,255,0.08);
    }

    .admin-actions-mobile {
      margin-top: auto;
      display: flex;
      flex-direction: column;
    }

    @media (max-width: 900px) {
      .desktop-nav {
        display: none;
      }

      .menu-toggle {
        display: block;
      }
    }
    form {
      width: 100%;
    }

    form > div {
      width: 100%;
    }

    input, textarea, select, button {
      width: 100%;
      max-width: 100%;
    }
    .form-row {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    @media (min-width: 600px) {
      .form-row {
        flex-direction: row;
      }

      .form-row > div {
        width: 50%;
      }
    }
  </style>

  <main class="container">
    <div class="card">
      <h2>Gestion des services</h2>
      <p class="small-muted">Ajouter, modifier et supprimer les services que les clients pourront voir.</p>
    </div>

    <div class="grid">
      <!-- Right: Formulaire d'ajout / edition -->
      <aside class="card mobile-card">
        <h3 id="formTitle">Ajouter un service</h3>

        <form id="serviceForm">
          <input type="hidden" id="svcId" />

          <div style="margin-bottom:10px;">
            <label for="svcTitle">Titre</label>
            <input id="svcTitle" name="title" type="text" required placeholder="Ex : Peinture" />
          </div>

          <div style="margin-bottom:10px;">
            <label for="svcShort">Sous-titre court (1 ligne)</label>
            <input id="svcShort" name="short" type="text" placeholder="Phrase courte" />
          </div>

          <div style="margin-bottom:10px;">
            <label for="svcDesc">Description d√©taill√©e</label>
            <textarea id="svcDesc" name="description" placeholder="D√©tail du service..."></textarea>
          </div>

          <div class="form-row">
            <div style="flex:1">
              <label for="svcPrice">√âtiquette / Prix (facultatif)</label>
              <input id="svcPrice" name="price" type="text" placeholder="Ex : 120 000 Ar"/>
            </div>
            <div style="flex:1">
              <label for="svcOrder">Ordre (tri)</label>
              <input id="svcOrder" name="order" type="number" placeholder="Ex : 10" />
            </div>
          </div>

          <div style="margin-bottom:10px;">
            <label>Image (URL ou fichier)</label>
            <input id="svcImageUrl" type="text" placeholder="Ex: https:// (laisser si vous voulez importer une image)"/>
            <div class="help">ou importer une image (max 2 Mo)</div>
            <input id="svcFile" type="file" accept="image/*" style="margin-top:8px;"/>
            <img id="svcPreview" class="img-preview" alt="Aper√ßu image" style="display:none;margin-top:10px;"/>
          </div>

          <div style="display:flex;gap:8px;align-items:center;">
            <button id="saveBtn" class="btn btn-primary" type="submit">Enregistrer</button>
            <button id="resetBtn" type="button" class="btn btn-ghost">R√©initialiser</button>
        </div>
        </form>
      </aside>

      <!-- Left: Liste & recherche -->
      <div class="svc-card mobile-card">
        <div style="display:flex;gap:8px;align-items:center;margin-bottom:10px;">
          <input id="searchInput" class="search" placeholder="Rechercher par titre / description..." />
          <button id="refreshBtn" class="btn btn-modraf" title="Rafra√Æchir">Rafra√Æchir</button>
        </div>

        <div id="servicesList" class="services-list" aria-live="polite">
          <!-- lignes inject√©es ici -->
        </div>

        <div style="margin-top:12px;">
          <button id="clearAllBtn" class="btn btn-ghost">Supprimer tous les services</button>
        </div>
      </div>
    </div>
  </main>

  <script>
    (async function(){
      const API_URL = "/api/services";
      const UPLOAD_URL = "/api/uploads-services";
    
      const el = (id) => document.getElementById(id);
      const list = el("servicesList");
    
      // R√©cup√©rer tous les services depuis le backend ===
      async function fetchServices() {
        const res = await fetch(API_URL);
        if (!res.ok) throw new Error("‚ùå Erreur r√©cup√©ration services");
        return res.json();
      }
    
      // Afficher les services ===
      async function render(filter = "") {
        const data = await fetchServices();
        const q = (filter || "").toLowerCase().trim();
    
        const filtered = data
          .sort((a, b) => (a.order_index || 0) - (b.order_index || 0))
          .filter(s =>
            !q ||
            (s.title && s.title.toLowerCase().includes(q)) ||
            (s.short && s.short.toLowerCase().includes(q)) ||
            (s.description && s.description.toLowerCase().includes(q))
          );
    
        if (!filtered.length) {
          list.innerHTML = "<div class='small-muted' style='padding:12px'>Aucun service trouv√©.</div>";
          return;
        }
    
        list.innerHTML = filtered.map(s => `
        <div class="svc-card" data-id="${s.id}">
          <div class="svc-head">
            <img class="svc-thumb" src="${s.image || '../images/logoCorbAt.png'}">
            <div class="svc-info">
              <div class="svc-title">${s.title || ''}</div>
              <div class="svc-price">${s.price || ''}</div>
            </div>
          </div>

          <div class="svc-desc">${s.short || s.description || ''}</div>

          <div class="svc-actions">
            <button class="btn edit-btn" data-id="${s.id}">Modifier</button>
            <button class="btn del-btn" data-id="${s.id}">Supprimer</button>
          </div>
        </div>
      `).join("");

    
        // Bind actions
        list.querySelectorAll(".edit-btn").forEach(b => b.addEventListener("click", () => loadEdit(b.dataset.id)));
        list.querySelectorAll(".del-btn").forEach(b => b.addEventListener("click", () => removeService(b.dataset.id)));
      }
    
      // Charger un service dans le formulaire pour modification ===
      async function loadEdit(id) {
        const services = await fetchServices();
        const s = services.find(x => x.id === id);
        if (!s) return alert("‚ùå Service introuvable");
    
        el("svcId").value = s.id;
        el("svcTitle").value = s.title || "";
        el("svcShort").value = s.short || "";
        el("svcDesc").value = s.description || "";
        el("svcPrice").value = s.price || "";
        el("svcOrder").value = s.order_index || 0;
        el("svcImageUrl").value = s.image || "";
        el("svcPreview").src = s.image || "";
        el("svcPreview").style.display = s.image ? "block" : "none";
        el("formTitle").textContent = "Modifier le service";
        window.scrollTo({top:0,behavior:"smooth"});
      }
    
      // Supprimer un service ===
      async function removeService(id) {
        if (!confirm("Voulez-vous vraiment supprimer ce service ?")) return;
        const res = await fetch(`${API_URL}/${id}`, { method: "DELETE" });
        if (!res.ok) return alert("‚ùå Erreur lors de la suppression !");
        alert("‚úÖ Service supprim√© avec succ√®s !");
        render();
      }
    
      // Ajouter ou modifier un service ===
      el("serviceForm").addEventListener("submit", async (e) => {
        e.preventDefault();
    
        const id = el("svcId").value;
        const service = {
          title: el("svcTitle").value.trim(),
          short: el("svcShort").value.trim(),
          description: el("svcDesc").value.trim(),
          price: el("svcPrice").value.trim(),
          order_index: Number(el("svcOrder").value) || 0,
          image: el("svcImageUrl").value.trim() || ""
        };
    
        if (!service.title) return alert("Le titre est requis.");
    
        const method = id ? "PATCH" : "POST";
        const url = id ? `${API_URL}/${id}` : API_URL;
    
        const res = await fetch(url, {
          method,
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(service)
        });
    
        if (!res.ok) return alert("‚ùå Erreur lors de l'enregistrement !");
        alert(id ? "‚úÖ Service modifi√© avec succ√®s  !" : "‚úÖ Service ajout√© avec succ√®s  !");
        
        e.target.reset();
        el("svcId").value = "";
        el("svcPreview").style.display = "none";
        el("formTitle").textContent = "Ajouter un service";
        render();
      });
    
      // Gestion du fichier image ===
      el("svcFile").addEventListener("change", async function() {
        const file = this.files[0];
        if (!file) return;
    
        const formData = new FormData();
        formData.append("images", file);
    
        try {
          const res = await fetch(UPLOAD_URL, { method: "POST", body: formData });
          if (!res.ok) throw new Error("‚ùå Erreur upload image");
          const data = await res.json();
    
          if (data.files && data.files.length > 0) {
            const uploaded = data.files[0];
            const imageUrl = uploaded.url.startsWith("http")
              ? uploaded.url
              : `${uploaded.url}`;
    
            el("svcImageUrl").value = imageUrl;
            el("svcPreview").src = imageUrl;
            el("svcPreview").style.display = "block";
          }
        } catch (err) {
          console.error("‚ùå Erreur upload:", err);
          alert("‚ùå Erreur lors du t√©l√©versement de l'image.");
        }
      });
    
      // R√©initialiser le formulaire ===
      el("resetBtn").addEventListener("click", () => {
        el("serviceForm").reset();
        el("svcId").value = "";
        el("svcPreview").style.display = "none";
        el("formTitle").textContent = "Ajouter un service";
      });
    
      // Recherche dynamique ===
      el("searchInput").addEventListener("input", (e) => render(e.target.value));
    
      // Rafra√Æchir ===
      el("refreshBtn").addEventListener("click", render);
    
      // Supprimer tous les services ===
      el("clearAllBtn").addEventListener("click", async () => {
        if (!confirm("Voulez-vous vraiment supprimer tous les services ?")) return;
        const all = await fetchServices();
        for (const s of all) {
          await fetch(`${API_URL}/${s.id}`, { method: "DELETE" });
        }
        alert("‚úÖ Tous les services ont √©t√© supprim√©s avec succ√®s !");
        render();
      });
    
      // Initialisation
      render();
    })();
  </script>
  <!-- ========== Admin Footer ========== -->
  <footer class="admin-footer" role="contentinfo" aria-label="Pied de page administration">
    <div class="admin-footer-inner">
      <div class="admin-left">
        <div class="admin-brand">
          <img src="../images/COR'BAT.png" alt="COR'BAT" />
          <div>
            <strong>Admin COR'BAT</strong>
            <div class="small muted">Espace administrateur</div>
          </div>
        </div>
        
      </div>
  
      <div class="admin-right">
        <nav class="admin-links" aria-label="Liens utilitaires admin">
          <a href="dashboard.html" class="nav-link">Tableau de bord</a>
          <a href="devis.html" class="nav-link">Devis</a>
          <a href="leads.html" class="nav-link">Clients</a>
          <a href="projects.html" class="nav-link">Projets</a>
          <a href="services.html" class="nav-link">Services</a>
          <a href="callbacks.html" class="nav-link">Demande de rappel</a>
        </nav>
      </div>
    </div>
  
    <div class="admin-footer-bottom">
      <small>¬© <span id="adminYear"></span> COR'BAT ‚Äî Espace Admin ‚Ä¢ Tous droits r√©serv√©s.</small>
    </div>
  </footer>
  <!-- ====== Styles pour admin-footer ====== -->
  <style>
    .admin-footer {
      background:#070707;
      color:#e6e6e6;
      padding:18px 24px;
      border-top:1px solid rgba(255,255,255,0.04);
      font-family: 'Poppins', sans-serif;
      margin-top:32px;
    }
    .admin-footer-inner {
      display:flex;
      gap:20px;
      align-items:center;
      justify-content:space-between;
      flex-wrap:wrap;
    }
    .admin-left { display:flex; gap:14px; align-items:center; min-width:200px; }
    .admin-brand img { width:44px; height:44px; object-fit:contain; border-radius:8px; }
    .admin-brand strong { display:block; color:#fff; }
    .small { font-size:0.87rem; }
    .muted { color:#a9a9a9; }
    .admin-center { flex:1; display:flex; justify-content:center; }
    .kpis { display:flex; gap:22px; align-items:center; }
    .kpi { text-align:center; min-width:88px; }
    .kpi-value { font-weight:700; font-size:1.25rem; color:linear-gradient(90deg,#ffb400,#ff6b6b); }
    .kpi-label { font-size:0.85rem; color:#bdbdbd; }
    .admin-right { display:flex; gap:14px; align-items:center; min-width:220px; justify-content:flex-end; }
    .admin-links { display:flex; gap:12px; align-items:center; flex-wrap:wrap; }
    .admin-links a { color:#dfe6ef; text-decoration:none; font-size:0.95rem; padding:6px 8px; border-radius:6px; }
    .admin-links a:hover { background:rgba(255,255,255,0.02); color:#fff; }
    .admin-actions { display:flex; gap:8px; align-items:center; }
    .btn-ghost.small { padding:6px 10px; background:transparent; color:#ccc; border:1px solid rgba(255,255,255,0.03); border-radius:8px; cursor:pointer; }
    .btn-deco { background:#ef4444; color:#ffffff; padding:8px 12px; border-radius:8px; border:0; cursor:pointer; font-weight:700; }
    .admin-footer-bottom { text-align:center; margin-top:12px; color:#9a9a9a; font-size:0.88rem; border-top:1px solid rgba(255,255,255,0.02); padding-top:10px; }
    .dev-credit {
      position: fixed;
      bottom: 10px;
      right: 14px;
      font-size: 0.68rem;
      opacity: 0.25;
      color: #ffffff; /* si fond clair ‚Üí change en #555 */
      line-height: 1.25;
      text-align: right;
      transition: opacity 0.25s ease, transform 0.25s ease;
      z-index: 9999;
    }
    .dev-credit a {
      color: inherit;
      text-decoration: none;
    }
    .dev-credit:hover {
      opacity: 0.9;
      transform: translateY(-2px);
    }
/* =================== MOBILE =================== */
@media (max-width: 768px) {
  .admin-footer {
    padding: 18px 14px 22px;
  }

  .admin-footer-inner {
    flex-direction: column;
    align-items: stretch;
    gap: 16px;
  }

  .admin-left {
    flex-direction: column;
    gap: 10px;
  }

  .admin-right {
    justify-content: flex-start;
  }

  .admin-links {
    flex-direction: column;
    align-items: stretch;
  }

  .admin-links a {
    width: 100%;
    text-align: left;
    padding: 12px 14px;
    font-size: 1rem;
  }

  .admin-footer-bottom {
    font-size: 0.8rem;
  }

  .dev-credit {
    text-align: left;
    font-size: 0.75rem;
    opacity: 0.7;
  }
}
  </style>
  
  <script>
    (function(){
      // Mise √† jour de l'ann√©e footer
      document.getElementById('adminYear').textContent = new Date().getFullYear();
    
      // D√©connexion via backend (efface cookie)
      const btnLogout = document.getElementById('btnLogout');
      const btnLogoutMobile = document.getElementById('btnLogoutMobile');

      async function logout() {
        if(!confirm('√ätes-vous s√ªr de vouloir vous d√©connecter ?')) return;

        await fetch("/api/auth/logout", {
          method: "POST",
          credentials: "include"
        });

        localStorage.removeItem('btp_admin_logged');
        localStorage.removeItem('btp_admin_token');
        sessionStorage.removeItem('btp_admin_logged');
        sessionStorage.removeItem('btp_admin_token');

        window.location.href = "login.html";
      }

      if (btnLogout) {
        btnLogout.addEventListener('click', logout);
      }

      if (btnLogoutMobile) {
        btnLogoutMobile.addEventListener('click', logout);
      }
    
      // Bouton vider cache (ne touche pas l‚Äôauth)
      const btnClearCache = document.getElementById('btnClearCache');
      if (btnClearCache){
        btnClearCache.addEventListener('click', function(){
          if(!confirm('Vider les donn√©es d‚Äôimages ?')) return;
          localStorage.removeItem('projectImages');
          alert('Cache images supprim√©.');
          document.dispatchEvent(new Event('projectImagesCleared'));
        });
      }
    
    })();
  </script>
    <script>
      const menuToggle = document.getElementById("menuToggle");
      const mobileMenu = document.getElementById("mobileMenu");
      const closeMenu = document.getElementById("closeMenu");
      const overlay = document.getElementById("mobileOverlay");
      
      menuToggle.addEventListener("click", () => {
        mobileMenu.classList.add("active");
        overlay.classList.add("active");
      });
      
      closeMenu.addEventListener("click", closeMobileMenu);
      overlay.addEventListener("click", closeMobileMenu);
      
      function closeMobileMenu() {
        mobileMenu.classList.remove("active");
        overlay.classList.remove("active");
      }
    </script>
</body>
</html>
